(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{7655:function(e,t,n){Promise.resolve().then(n.bind(n,4562))},4562:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var s=n(3827),a=n(4090),r=n(7907),l=n(8745),i=n(8371),c=n(8600),o=n(8931),d=n(892);function x(){var e,t;let n=(0,r.useParams)().code,[x,m]=(0,a.useState)(""),h=(0,o.aM)(d.hi.getRoomState.get,{code:n}),p=(0,o.Db)(d.hi.advanceMatch.advance);if((0,a.useEffect)(()=>{m("".concat(window.location.origin,"/join?code=").concat(n))},[n]),!h)return(0,s.jsx)("div",{className:"p-10 text-center",children:"Connecting to room..."});let f=JSON.parse(h.bracketState),u=f.rounds[h.currentRound],g=null==u?void 0:u.matches[h.currentMatch];return(0,s.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-preg-pink/10 via-white to-preg-mint/10 p-6 flex flex-col items-center",children:[(0,s.jsxs)("header",{className:"w-full max-w-6xl flex justify-between items-center mb-8",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-xl font-bold text-preg-ink",children:"Baby Name Deathmatch"})}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsx)("span",{className:"text-xs uppercase tracking-widest text-preg-ink/50",children:"Join Code"}),(0,s.jsx)("span",{className:"text-4xl font-black text-preg-ink tracking-widest",children:n}),x&&(0,s.jsxs)("div",{className:"mt-4 p-3 rounded-2xl bg-white/80 border border-preg-peach/40 text-center shadow-sm",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold text-preg-ink/60 mb-2",children:"Scan to join instantly"}),(0,s.jsx)("div",{className:"mx-auto w-40 h-40 bg-white rounded-xl overflow-hidden border border-preg-peach/30",children:(0,s.jsx)("img",{src:"https://api.qrserver.com/v1/create-qr-code/?size=240x240&data=".concat(encodeURIComponent(x)),alt:"Join QR code",className:"w-full h-full object-contain"})}),(0,s.jsx)("p",{className:"mt-2 text-[10px] text-preg-ink/40 break-all",children:x})]})]})]}),"LOBBY"===h.status&&(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-10 w-full max-w-4xl",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("h2",{className:"text-4xl font-bold text-preg-ink",children:"Waiting for Players..."}),(0,s.jsxs)("p",{className:"text-xl text-preg-ink/60",children:["Go to ",(0,s.jsx)("span",{className:"font-bold text-preg-ink",children:"preglife.app/join"})," and enter code ",(0,s.jsx)("span",{className:"font-bold text-preg-ink",children:n})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:(0,s.jsx)(l.M,{children:h.players.map((e,t)=>(0,s.jsx)(i.E.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"px-6 py-3 rounded-full bg-white shadow-soft text-lg font-semibold text-preg-ink border border-preg-peach/30",children:e},"".concat(e,"-").concat(t)))})}),h.players.length>0&&(0,s.jsx)("button",{onClick:()=>p({gameId:h._id,action:"START"}),className:"mt-10 px-8 py-4 rounded-2xl bg-preg-ink text-white font-bold text-xl shadow-lg hover:scale-105 transition-transform",children:"Start Tournament"})]}),("VOTING"===h.status||"REVEAL"===h.status)&&g&&(0,s.jsxs)("div",{className:"flex-1 w-full max-w-5xl flex flex-col gap-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"inline-block px-3 py-1 rounded-full bg-white/50 text-xs font-bold uppercase tracking-wide text-preg-ink/50 mb-2",children:g.roundLabel}),(0,s.jsxs)("h2",{className:"text-3xl font-bold text-preg-ink",children:["Match ",h.currentMatch+1," of ",u.matches.length]})]}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-8 items-center",children:[(0,s.jsxs)("div",{className:"relative p-10 rounded-3xl bg-white shadow-soft border-4 transition-all duration-500 ".concat("REVEAL"===h.status&&g.winner===g.nameA?"border-preg-pink scale-105":"border-transparent"),children:[(0,s.jsx)("h3",{className:"text-5xl md:text-7xl font-black text-center text-preg-ink",children:g.nameA}),"REVEAL"===h.status&&(0,s.jsxs)("div",{className:"mt-4 text-center text-2xl font-bold text-preg-pink",children:[g.votesA," votes"]})]}),(0,s.jsxs)("div",{className:"relative p-10 rounded-3xl bg-white shadow-soft border-4 transition-all duration-500 ".concat("REVEAL"===h.status&&g.winner===(null!==(e=g.nameB)&&void 0!==e?e:g.nameA)?"border-preg-mint scale-105":"border-transparent"),children:[(0,s.jsx)("h3",{className:"text-5xl md:text-7xl font-black text-center text-preg-ink",children:null!==(t=g.nameB)&&void 0!==t?t:"Bye"}),"REVEAL"===h.status&&(0,s.jsxs)("div",{className:"mt-4 text-center text-2xl font-bold text-preg-mint",children:[g.votesB," votes"]})]})]}),(0,s.jsxs)("div",{className:"flex justify-center pb-10",children:["VOTING"===h.status&&(0,s.jsx)("button",{onClick:()=>p({gameId:h._id,action:"REVEAL"}),className:"px-8 py-4 rounded-2xl bg-preg-ink text-white font-bold text-xl shadow-lg hover:scale-105 transition-transform",children:"Reveal Winner"}),"REVEAL"===h.status&&(0,s.jsx)("button",{onClick:()=>p({gameId:h._id,action:"NEXT"}),className:"px-8 py-4 rounded-2xl bg-white text-preg-ink border-2 border-preg-ink font-bold text-xl shadow-lg hover:scale-105 transition-transform",children:"Next Match"})]})]}),"FINISHED"===h.status&&(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-8",children:[(0,s.jsx)("h2",{className:"text-6xl font-black text-preg-ink",children:"Winner!"}),(0,s.jsx)("div",{className:"p-12 rounded-full bg-gradient-to-br from-preg-pink via-preg-peach to-preg-mint shadow-soft animate-bounce",children:(0,s.jsx)("span",{className:"text-6xl font-black text-white",children:f.finalWinner})}),(0,s.jsx)(c.a,{matches:f.rounds.flatMap(e=>e.matches),rounds:f.rounds,winnerName:f.finalWinner,onRestart:()=>{}})]})]})}},892:function(e,t,n){"use strict";n.d(t,{hi:function(){return a}});var s=n(5591);let a=s.qL;(0,s.Xg)()}},function(e){e.O(0,[371,659,293,600,971,69,744],function(){return e(e.s=7655)}),_N_E=e.O()}]);