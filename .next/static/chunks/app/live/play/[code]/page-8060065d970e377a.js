(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{1175:function(e,t,n){Promise.resolve().then(n.bind(n,1198))},1198:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(3827),i=n(4090),r=n(7907),a=n(8745),l=n(8371),c=n(8931),o=n(892);function d(){var e,t,n,d,p;let h=(0,r.useParams)(),m=(0,r.useSearchParams)(),x=h.code,f=null!==(t=m.get("playerId"))&&void 0!==t?t:"unknown",g=(0,c.aM)(o.hi.getRoomState.get,{code:x}),b=(0,c.Db)(o.hi.castVote.cast),[j,v]=(0,i.useState)(null),[k,y]=(0,i.useState)("");if(g&&"VOTING"===g.status){let e=JSON.parse(g.bracketState).rounds[g.currentRound].matches[g.currentMatch];e.id!==k&&(y(e.id),v(null))}async function w(e){if(!g)return;let t=JSON.parse(g.bracketState).rounds[g.currentRound].matches[g.currentMatch];v(e),await b({gameId:g._id,matchId:t.id,playerId:f,choice:e})}if(!g)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-pulse text-preg-ink/50 font-bold",children:"Connecting..."})});let N=null===(e=JSON.parse(g.bracketState).rounds[g.currentRound])||void 0===e?void 0:e.matches[g.currentMatch];return(0,s.jsxs)("main",{className:"min-h-screen flex flex-col bg-gray-50 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white shadow-sm z-10",children:[(0,s.jsxs)("div",{className:"text-xs font-black text-preg-ink/40 tracking-widest uppercase",children:["ROOM ",x]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-preg-ink/60",children:"LIVE"}),(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"})]})]}),(0,s.jsx)("div",{className:"flex-1 relative",children:(0,s.jsxs)(a.M,{mode:"wait",children:["LOBBY"===g.status&&(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[(0,s.jsx)("div",{className:"h-24 w-24 rounded-full bg-white shadow-soft flex items-center justify-center mb-6 animate-bounce-slow",children:(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-12 w-12 text-preg-pink",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("path",{d:"M7 13c0-2 1-3 3-3s3 1 3 3M14 13c0-2 1-3 3-3s3 1 3 3",strokeLinecap:"round"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"})]})}),(0,s.jsx)("h2",{className:"text-3xl font-black text-preg-ink mb-2",children:"You're in!"}),(0,s.jsx)("p",{className:"text-preg-ink/60",children:"Waiting for host to start..."})]},"lobby"),"VOTING"===g.status&&N&&(0,s.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col p-4 gap-4",children:[(0,s.jsx)("div",{className:"text-center py-2",children:(0,s.jsx)("h2",{className:"text-xl font-black text-preg-ink",children:"Vote now!"})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,s.jsx)(u,{name:N.nameA,color:"pink",isSelected:j===N.nameA,isDimmed:null!==j&&j!==N.nameA,onClick:()=>w(N.nameA)}),(0,s.jsx)(u,{name:null!==(n=N.nameB)&&void 0!==n?n:"Bye",color:"mint",isSelected:j===(null!==(d=N.nameB)&&void 0!==d?d:"Bye"),isDimmed:null!==j&&j!==(null!==(p=N.nameB)&&void 0!==p?p:"Bye"),onClick:()=>N.nameB&&w(N.nameB),disabled:!N.nameB})]}),j&&(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-2 text-sm font-bold text-preg-ink/40 uppercase tracking-widest",children:"Vote cast!"})]},"voting"),"REVEAL"===g.status&&N&&(0,s.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[(0,s.jsx)("div",{className:"mb-2 text-sm font-bold text-preg-ink/40 uppercase tracking-widest",children:"Winner"}),(0,s.jsx)(l.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.5},className:"text-5xl font-black mb-6 ".concat(N.winner===N.nameA?"text-preg-pink":"text-preg-mint"),children:N.winner}),(0,s.jsx)("div",{className:"text-preg-ink/50 text-sm",children:"Look at the big screen!"})]},"reveal"),"FINISHED"===g.status&&(0,s.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[(0,s.jsx)("div",{className:"h-24 w-24 rounded-full bg-gradient-to-br from-preg-pink to-preg-peach flex items-center justify-center mb-6 shadow-lg",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",className:"h-12 w-12 text-white",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 2l3 7 7-3-3 7 3 7-7-3-3 7-3-7-7 3 3-7-3-7 7 3z"})})}),(0,s.jsx)("h2",{className:"text-3xl font-black text-preg-ink mb-2",children:"Tournament Over!"}),(0,s.jsx)("p",{className:"text-preg-ink/60",children:"Thanks for playing."})]},"finished")]})})]})}function u(e){let{name:t,color:n,isSelected:i,isDimmed:r,onClick:a,disabled:c}=e,o="pink"===n?i?"bg-preg-pink text-white":"bg-white text-preg-ink border-preg-pink/20":i?"bg-preg-mint text-white":"bg-white text-preg-ink border-preg-mint/20";return(0,s.jsxs)(l.E.button,{whileTap:{scale:.95},onClick:a,disabled:c,className:"\n                flex-1 rounded-3xl border-4 shadow-soft flex items-center justify-center relative overflow-hidden\n                ".concat(o,"\n                ").concat(r?"opacity-30 grayscale":"opacity-100","\n                ").concat(c?"opacity-20 cursor-not-allowed":"","\n                transition-all duration-300\n            "),children:[(0,s.jsx)("span",{className:"text-3xl font-black z-10",children:t}),i&&(0,s.jsx)(l.E.div,{layoutId:"check",className:"absolute top-4 right-4 h-8 w-8 rounded-full bg-white text-preg-ink flex items-center justify-center shadow-sm",children:"âœ“"})]})}},892:function(e,t,n){"use strict";n.d(t,{hi:function(){return i}});var s=n(5591);let i=s.qL;(0,s.Xg)()},8745:function(e,t,n){"use strict";n.d(t,{M:function(){return g}});var s=n(3827),i=n(4090),r=n(3856),a=n(2435),l=n(4561),c=n(3449);class o extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:n}=e,r=(0,i.useId)(),a=(0,i.useRef)(null),l=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,i.useContext)(c._);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:i}=l.current;if(n||!a.current||!e||!t)return;a.current.dataset.motionPopId=r;let c=document.createElement("style");return d&&(c.nonce=d),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(r,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(i,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[n]),(0,s.jsx)(o,{isPresent:n,childRef:a,sizeRef:l,children:i.cloneElement(t,{ref:a})})}let u=e=>{let{children:t,initial:n,isPresent:r,onExitComplete:c,custom:o,presenceAffectsLayout:u,mode:h}=e,m=(0,a.h)(p),x=(0,i.useId)(),f=(0,i.useCallback)(e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;c&&c()},[m,c]),g=(0,i.useMemo)(()=>({id:x,initial:n,isPresent:r,custom:o,onExitComplete:f,register:e=>(m.set(e,!1),()=>m.delete(e))}),u?[Math.random(),f]:[r,f]);return(0,i.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[r]),i.useEffect(()=>{r||m.size||!c||c()},[r]),"popLayout"===h&&(t=(0,s.jsx)(d,{isPresent:r,children:t})),(0,s.jsx)(l.O.Provider,{value:g,children:t})};function p(){return new Map}var h=n(3177);let m=e=>e.key||"";function x(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var f=n(5526);let g=e=>{let{children:t,custom:n,initial:l=!0,onExitComplete:c,presenceAffectsLayout:o=!0,mode:d="sync",propagate:p=!1}=e,[g,b]=(0,h.oO)(p),j=(0,i.useMemo)(()=>x(t),[t]),v=p&&!g?[]:j.map(m),k=(0,i.useRef)(!0),y=(0,i.useRef)(j),w=(0,a.h)(()=>new Map),[N,E]=(0,i.useState)(j),[C,M]=(0,i.useState)(j);(0,f.L)(()=>{k.current=!1,y.current=j;for(let e=0;e<C.length;e++){let t=m(C[e]);v.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[C,v.length,v.join("-")]);let S=[];if(j!==N){let e=[...j];for(let t=0;t<C.length;t++){let n=C[t],s=m(n);v.includes(s)||(e.splice(t,0,n),S.push(n))}"wait"===d&&S.length&&(e=S),M(x(e)),E(j);return}let{forceRender:R}=(0,i.useContext)(r.p);return(0,s.jsx)(s.Fragment,{children:C.map(e=>{let t=m(e),i=(!p||!!g)&&(j===C||v.includes(t));return(0,s.jsx)(u,{isPresent:i,initial:(!k.current||!!l)&&void 0,custom:i?void 0:n,presenceAffectsLayout:o,mode:d,onExitComplete:i?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==R||R(),M(y.current),p&&(null==b||b()),c&&c())},children:e},t)})})}}},function(e){e.O(0,[371,659,293,971,69,744],function(){return e(e.s=1175)}),_N_E=e.O()}]);