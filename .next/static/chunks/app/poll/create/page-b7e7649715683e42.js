(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{7675:function(e,t,r){Promise.resolve().then(r.bind(r,6581))},6581:function(e,t,r){"use strict";r.r(t),r.d(t,{CreatePollForm:function(){return l}});var a=r(3827),s=r(4090),n=r(7907);function l(){let e=(0,n.useRouter)(),[t,r]=(0,s.useState)(""),[l,o]=(0,s.useState)([]),[i,u]=(0,s.useState)(""),[c,p]=(0,s.useState)(7),[d,x]=(0,s.useState)(!1);function h(){let e=i.trim();e&&!l.includes(e)&&(o([...l,e]),u(""))}async function m(r){if(r.preventDefault(),t&&!(l.length<2)){x(!0);try{let r=await fetch("/api/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,names:l,durationDays:c})});if(r.ok){let t=await r.json();e.push("/poll/".concat(t.id))}else alert("Failed to create poll")}catch(e){console.error(e),alert("Error creating poll")}finally{x(!1)}}}return(0,a.jsxs)("form",{onSubmit:m,className:"flex flex-col gap-6 max-w-lg mx-auto",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-preg-ink/70",children:"Poll Title"}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"e.g. Help us name our baby!",className:"w-full rounded-2xl border border-preg-peach/70 bg-white/50 px-4 py-3 text-preg-ink focus:border-preg-pink focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-preg-ink/70",children:"Add Names"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:i,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),h()),placeholder:"Type a name...",className:"flex-1 rounded-2xl border border-preg-peach/70 bg-white/50 px-4 py-3 text-preg-ink focus:border-preg-pink focus:outline-none"}),(0,a.jsx)("button",{type:"button",onClick:h,className:"rounded-2xl bg-white px-6 py-3 font-semibold text-preg-ink shadow-sm hover:bg-gray-50",children:"Add"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-3 py-1 text-sm text-preg-ink shadow-sm border border-preg-peach/30",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{o(l.filter(t=>t!==e))},className:"text-preg-ink/40 hover:text-preg-rose",children:"\xd7"})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-preg-ink/70",children:"Duration (Days)"}),(0,a.jsxs)("select",{value:c,onChange:e=>p(Number(e.target.value)),className:"w-full rounded-2xl border border-preg-peach/70 bg-white/50 px-4 py-3 text-preg-ink focus:border-preg-pink focus:outline-none",children:[(0,a.jsx)("option",{value:1,children:"1 Day"}),(0,a.jsx)("option",{value:3,children:"3 Days"}),(0,a.jsx)("option",{value:7,children:"7 Days"}),(0,a.jsx)("option",{value:30,children:"30 Days"}),(0,a.jsx)("option",{value:90,children:"90 Days"})]})]}),(0,a.jsx)("button",{type:"submit",disabled:d||!t||l.length<2,className:"rounded-2xl bg-gradient-to-r from-preg-pink via-preg-peach to-preg-mint px-6 py-4 font-bold text-preg-ink shadow-soft hover:brightness-105 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating...":"Create Poll"})]})}},7907:function(e,t,r){"use strict";var a=r(5313);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=7675)}),_N_E=e.O()}]);